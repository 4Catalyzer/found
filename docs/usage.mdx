---
name: Usage
order: 99
---

# Usage

```js
import {
  createBrowserRouter,
  HttpError,
  makeRouteConfig,
  Redirect,
  Route,
} from 'found';

/* ... */

const BrowserRouter = createBrowserRouter({
  routeConfig: makeRouteConfig(
    <Route
      path="/"
      Component={AppPage}
    >
      <Route
        Component={MainPage}
      />
      <Route
        path="widgets"
      >
        <Route
          Component={WidgetsPage}
          getData={fetchWidgets}
        />
        <Route
          path="widgets/:widgetId"
          getComponent={() => (
            System.import('./WidgetPage').then(module => module.default)
          )}
          getData={({ params: { widgetId } }) => (
            fetchWidget(widgetId).catch(() => { throw new HttpError(404); })
          )}
          render={({ Component, props }) => (
            Component && props ? (
              <Component {...props} />
            ) : (
              <div><small>Loading</small></div>
            )
          )}
        />
      </Route>
      <Redirect
        from="widget/:widgetId"
        to="/widgets/:widgetId"
      />
    </Route>,
  ),

  renderError: ({ error }) => (
    <div>
      {error.status === 404 ? 'Not found' : 'Error'}
    </div>
  ),
});

ReactDOM.render(
  <BrowserRouter />,
  document.getElementById('root'),
);
```

This configuration will set up the following routes:

- `/`
  - This renders `<AppPage><MainPage /></AppPage>`
- `/widget`
  - This renders `<AppPage><WidgetsPage /><AppPage>`
  - This will load the data for `<WidgetsPage>` when the user navigates to this route
  - This will continue to render the previous routes while the data for `<WidgetsPage>` are loading
- `/widgets/${widgetId}` (e.g. `/widgets/foo`)
  - This renders `<AppPage><WidgetPage /></AppPage>`
  - This will load the code and data for `<WidgetPage>` when the user navigates to this route
  - This will render the text "Loading" in place of `<WidgetPage>` while the code and data for `<WidgetPage>` are loading
- `/widget/${widgetId}` (e.g. `/widget/foo`)
  - This redirects to `/widgets/${widgetId}`, then renders as above

```js
// AppPage.js

import { Link } from 'found';
import React from 'react';

function AppPage({ children }) {
  return (
    <div>
      <ul>
        <li>
          <Link to="/" activeClassName="active" exact>
            Main
          </Link>
        </li>
        <li>
          <Link to="/widgets/foo" activeClassName="active">
            Foo widget
          </Link>
        </li>
      </ul>

      {children}
    </div>
  );
}

export default AppPage;
```
